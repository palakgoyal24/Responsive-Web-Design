<!DOCTYPE html>
<html lang="en-GB" manifest="Offline.appcache">
<head>
	<meta charset="utf-8">
	<meta name="description" content="Current Location of user">
	<meta name="keywords" content="location,current">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Student Helpbook | Your Location</title>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="stylesheets/bounce.css" />
	<link rel="stylesheet" href="stylesheets/styles.css" />
	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="https://maps.google.com/maps/api/js?sensor=true"></script>
	<script type="text/javascript">
	/*To get the current location
	http://www.paulund.co.uk/how-to-use-geolocation-api-with-google-maps */

		var x = document.getElementById("current");

		function getlocation(){
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(success,error);
			} else {
				x.innerHTML('Geolocation is not supported');
			}

		function success(position) {
			var mapholder = document.createElement('div');
			mapholder.id = 'mapcontainer';
			mapholder.style.height = '400px';
			mapholder.style.width = '600px';

			document.querySelector('#map').appendChild(mapholder);

			var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

			var options = {
				zoom: 15,
				center: coords,
				mapTypeControl: false,
				navigationControlOptions: {
					style: google.maps.NavigationControlStyle.SMALL
				},
			mapTypeId: google.maps.MapTypeId.ROADMAP
			};
			var map = new google.maps.Map(document.getElementById("mapcontainer"), options);

			var marker = new google.maps.Marker({
				position: coords,
				map: map,
				title:"Your Current Location!"
			});
		}

		function error(error) {
			switch(error.code) {
				case error.PERMISSION_DENIED:
					x.innerHTML = "User denied the request for Geolocation."
					break;
				case error.POSITION_UNAVAILABLE:
					x.innerHTML = "Location information is unavailable."
					break;
				case error.TIMEOUT:
					x.innerHTML = "The request to get user location timed out."
					break;
				case error.UNKNOWN_ERROR:
					x.innerHTML = "An unknown error occurred."
					break;
			}
		}
		}
	</script>
</head>

<body>
	<header>
	<!-- Inspired by bootstrap-->
	<nav id="header-nav" class="navbar navbar-dark bg-primary">
		<div class="container-fluid">
			<div class="navbar-header">
				<div class="navbar-brand visible-xs">
					<a href="index.html"><h1>Student Helpbook</h1></a>
				</div>

				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#collapsable-nav" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>

			<div id="collapsable-nav" class="collapse navbar-collapse">
				 <ul id="nav-list" class="nav navbar-nav navbar-left">
					<li>
						<a href="index.html">
							<span class="glyphicon glyphicon-home"></span></a>
					</li>
					<li>
						<a href="Bus.html">
							Buses</a>
					</li>
					<li>
						<a href="Shops.html">Grocery</a>
					</li>
					<li>
						<a href="BRP.html">BRP Collection</a>
					</li>
					<li>
						<a href="Rail.html">Rail</a>
					</li>
					<li>
						<a href="Emergency.html">Emergency Contacts</a>
					</li>
					<li class="active">
						<a href="Location.html">Current Location</a>
					</li>
					<li>
						<a href="Discounts.html">Student Discounts</a>
					</li>
					<li>
						<a href="Pointers.html">FAQs</a>
					</li>
	      </ul>

	      <ul id="nav-list" class="nav navbar-nav navbar-right">
	        <li>
						<a href="Registration.html"><span class="glyphicon glyphicon-user"></span> Sign Up</a>
					</li>
					<script type="text/javascript">
						//Using sessionStorage to display the Username in place of Login tab.
						if(sessionStorage.getItem('Username'))
						{
							document.write("<li><a href='#'>Welcome " + sessionStorage.getItem('Username') + "</a>");
						}
						else
						{
							document.write("<li><a href='Login.html'><span class='glyphicon glyphicon-log-in'></span> Login</a></li>")
						}
						</script>
	      </ul>
	    </div>
	  </div>
	</nav>
	</header>

<div class="container-fluid">
	<p id="current">Click the button to get your location.</p>
	<br>
	<button onclick="getlocation()">Your Location</button>
	<br><br>

	<!--<<canvas class="map" id="map" height="480"  width="640" style="border:1px solid #d3d3d3;">
	</canvas>-->
	<article id="map">

	</article>
</div>

<footer>
	<hr>
	<div id="connect" class="container-fluid">
		<h5>Connect with Surrey</h5>
			<div class="row">
				<div class="col-xs-12 col-sm-6 col-md-6 text-left">
					<a title="Find us on Facebook" href="https://www.facebook.com/universityofsurrey?fref=ts"><img src="Images\facebook-icon.png" alt="Facebook Logo" class="animate2" width="35" height="35"/> </a>
					<a title="Follow us on Twitter" href="https://twitter.com/UniOfSurrey"><img src="Images\Twitter-icon.png" alt="Twitter Logo" class="animate2" width="35" height="35" /> </a>
					<a title="Watch us on YouTube" href="http://www.youtube.com/user/UniversityofSurrey"> <img src="Images\youtube-icon.png" alt="Youtube Logo" class="animate2" width="35" height="35"/> </a>
					<a title="Join us on Google+" href="https://plus.google.com/+universityofsurrey"> <img src="Images\Google-plus-icon.png" alt="Google + Logo" class="animate2" width="35" height="35"/> </a>
					<a title="Find us on the Conversation" href="http://theconversation.com/institutions/university-of-surrey"> <img src="Images\conversations-icon.png" alt="Conversation Logo" class="animate2" width="35" height="35"/> </a>
					<a title="Look at us on Instagram" href="http://instagram.com/uniofsurrey?ref=badge"> <img src="Images\instagram-icon.png" alt="Instagram Logo" class="animate2" width="35" height="35"/> </a>
			</div>
			<div class="col-xs-12 col-sm-6 col-md-6 text-right">&copy; Copyright Palak Goyal</div>
		</div>
	</div>
</footer>
</body>
</html>
